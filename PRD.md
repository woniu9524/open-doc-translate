OpenDoc Translate - 开源文档翻译助手 (PRD)
文档版本	V1.5 (优化核心版)
产品名称	OpenDoc Translate (中文名: 开源文档翻译助手)
1. 产品概述 (Overview)
1.1. 项目背景
开源项目文档的翻译工作流繁琐、低效且易于出错，主要痛点在于手动操作、状态追踪困难以及与 Git 版本管理脱节。
1.2. 产品定位与核心目标
OpenDoc Translate 是一款基于 LLM 的桌面端文档翻译工具，专为开源贡献者设计。它旨在将翻译工作无缝集成到标准的 Git Fork & Pull Request 工作流中，提供从状态识别、高质量翻译到对比审查的一站式解决方案。
核心目标:
智能状态识别： 自动识别文件是“已翻译”、“已过时”还是“未翻译”。
高质量翻译： 提供基于 LLM 和可定制提示词 (Prompt) 的文件翻译能力。
高效审查： 提供直观的差异高亮 (Diff) 对比界面，方便用户快速定位修改。
流程引导： 在应用内引导用户完成从翻译到 Commit & Push 的核心 Git 操作。
2. 功能需求规格 (Functional Requirements)
2.1. 主界面布局
应用界面分为三个核心区域：顶部工具栏、左侧面板 (含页签)、主工作区。
2.2. 顶部工具栏 (核心上下文)
定义工作的基本环境，保持不变。
功能点	描述	验收标准
2.2.1. 项目管理	下拉菜单与“+”按钮。	1. 点击“+”选择本地 Fork 仓库。<br>2. 自动检测 origin 和 upstream。<br>3. 下拉菜单切换项目。
2.2.2. 分支上下文	两个核心下拉菜单。	1. 上游分支 (Upstream): 选择原文基准分支。<br>2. 工作分支 (Working): 选择或创建本地翻译分支。
2.2.3. 同步状态	一个“同步/Fetch”按钮。	1. 点击后执行 git fetch --all 并刷新文件状态。
2.3. 左侧面板 (功能区)
采用页签切换模式，整合核心功能，比 MVP 版本功能更丰富。
功能点	描述	验收标准
文件树视图		1. 树状展示符合条件的文件，并显示状态图标 (🟢🟡⚪)。
筛选与操作		1. 提供按状态筛选的按钮组。<br>2. 支持多选，右键菜单核心操作为 “翻译选中文件”。
这是一个轻量级的 Git 面板，专注于引导用户完成贡献流程。
功能点	描述	验收标准
变更列表		1. 列出所有在工作分支上被修改过的文件。<br>2. 提供“全部暂存”和单个文件的“暂存”按钮。
提交与推送		1. 提供 Commit Message 输入框。<br>2. 提供“提交并推送 (Commit & Push)”按钮，一次性完成 commit 和 push to origin 操作。
功能点	描述	验收标准
LLM 服务配置		1. API Key 输入框。<br>2. 模型选择下拉菜单。
翻译提示词 (Prompt)		1. 提供一个可编辑的全局 Prompt 模板。<br>2. 允许为单个项目覆盖全局 Prompt，实现项目级定制。
项目配置		1. 显示并允许编辑 origin 和 upstream 的 URL。<br>2. 设置监听的目录和文件类型。
2.4. 主工作区 (Diff & Editor)
一个强大的、支持差异高亮的对比编辑视图。
功能点	描述	验收标准
双栏对比视图	左栏 (原文) 和 右栏 (译文)。	1. 左栏 (只读): 显示上游分支的最新原文。<br>2. 右栏 (可编辑): 显示工作分支的译文。
差异高亮 (Diff)		1. 当打开“已过时”文件时，系统自动在左栏原文中高亮显示与旧版本相比发生变化的内容行，引导用户审查。
翻译与保存		1. 若文件未翻译，右栏显示“翻译此文件”按钮。<br>2. 点击翻译后，译文出现在右栏。<br>3. 用户修改后，点击“保存”按钮，将修改写入本地文件。
3. 核心工作流 (Core Workflows)
3.1. 状态可视化系统
状态图标	状态名称	触发条件
🟢 已翻译	本地存在译文，源文件 Hash 与上游一致。	
🟡 已过时	本地存在译文，源文件 Hash 与上游不一致。	
⚪ 未翻译	上游存在源文件，本地无对应译文。	
M (状态旁)	已修改	译文文件在本地被修改过但尚未提交。
3.2. 状态更新逻辑 (核心引擎)
当用户点击“同步”按钮时，系统执行基于 Git Commit Hash 的版本对比。
git fetch --all。
获取上游分支中每个源文件的最新 Commit Hash。
与本地 .opendoc.json 中记录的 Hash 进行比对，确定文件的 🟢🟡⚪ 状态。
3.3. 端到端翻译与贡献流程 (优化版)
步骤一：项目设置
用户 Fork & Clone，然后在应用中添加项目。
在顶部工具栏设置上游分支和工作分支。
（可选）在设置页签中，为当前项目定制专属的翻译 Prompt。
点击“同步”获取文件状态。
步骤二：翻译与审查
5. 在“探索器”中，选择“未翻译”或“已过时”的文件，右键点击 “翻译选中文件”。
6. 翻译完成后，点击文件，在主工作区进行审查。
* 对于“已过时”文件，重点关注左侧原文的高亮差异部分，对右侧译文进行相应修改。
* 对于新翻译的文件，通读并校对。
7. 审查满意后，点击“保存”。
步骤三：提交与贡献 (应用内引导)
8. 切换到“源代码管理”页签。
9. 所有已保存的修改都会出现在变更列表中。
10. 用户输入规范的 Commit Message，点击“全部暂存”。
11. 点击“提交并推送”按钮。应用将自动执行 git commit 和 git push origin [工作分支名]。